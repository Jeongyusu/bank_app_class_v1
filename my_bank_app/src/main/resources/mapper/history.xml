<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tenco.bankapp.repository.interfaces.HistoryRepository">
 	<insert id="insert" parameterType="com.tenco.bankapp.repository.entity.History">
		 insert into history_tb(amount, w_balance, d_balance,
		 w_account_id, d_account_id)
		 values(#{amount}, #{wBalance},#{dBalance},
		 #{wAccountId}, #{dAccountId});
	</insert>
	<!-- 시간은 디폴트 설정되어 있어서 안넣어줘도 괜찮다 -->
	<delete id="deleteById" >
		 delete from history_tb where id = #{id}
	</delete>
	
	<update id="updateById">
		 update history_tb
		 set amount = #{amount},
		 w_balance = #{wBalance},
		 d_balance = #{dBalance},
		 where id = #{id}
	</update>
	
	<select id="findAll" resultType="com.tenco.bankapp.repository.entity.History">
		 select * from history_tb where id = #{id}
	</select>
	
	<!-- 동적 쿼리 생성 예정 -->
	<select id="findByAccountNumber" resultType="com.tenco.bankapp.repository.entity.History">
		 select *
		 from history_tb as h
		 left join account_tb as a
		 on h.w_account_id = a.id
		 where a.number = #{id};
	</select>
</mapper>









